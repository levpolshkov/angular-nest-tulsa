(self.webpackChunktulsa_remote_application_client=self.webpackChunktulsa_remote_application_client||[]).push([[180],{2180:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AdminModule:()=>U});var i=n(8583),s=n(665),r=n(4330),o=n(7716),a=n(6546),c=n(8832);function l(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"ngb-alert",2),o.NdJ("closed",function(){const t=o.CHM(e).$implicit;return o.oxw().onClose(t)}),o._UZ(2,"span",3),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit;o.xp6(1),o.Q6J("type",e.type)("dismissible",!0),o.xp6(1),o.Q6J("innerHtml",e.content,o.oJD)}}let u=(()=>{class e{constructor(e){this.alertService=e,this.alerts=[]}ngOnInit(){this.alerts=this.alertService.alerts}onClose(e){this.alertService.onClose(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(a.c))},e.\u0275cmp=o.Xpm({type:e,selectors:[["alert-container"]],decls:2,vars:1,consts:[[1,"container"],[4,"ngFor","ngForOf"],[3,"type","dismissible","closed"],[3,"innerHtml"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,l,3,3,"div",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngForOf",t.alerts))},directives:[i.sg,c.xm],styles:["[_nghost-%COMP%]{position:fixed;top:20px;width:100%;z-index:1050}"]}),e})();var d=n(306),h=n(8567),p=n(4987);function g(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",13),o.TgZ(1,"a",14),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).onClick()}),o._UZ(2,"i"),o._uU(3),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit;o.xp6(1),o.Q6J("routerLink",e.url),o.xp6(1),o.Tol(e.icon),o.xp6(1),o.hij(" ",e.name," ")}}function f(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",15),o.TgZ(1,"button",16),o._UZ(2,"i",17),o._uU(3),o.qZA(),o.TgZ(4,"div",18),o.TgZ(5,"button",19),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).navigateToProfile()}),o._uU(6,"Profile"),o.qZA(),o.TgZ(7,"button",19),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).logout()}),o._uU(8,"Logout"),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw(2);o.xp6(3),o.hij(" ",e.user.fullName,"")}}function v(e,t){if(1&e&&(o.TgZ(0,"div",2),o.TgZ(1,"div",3),o.TgZ(2,"div",4),o._uU(3,"Tulsa Remote"),o.qZA(),o.qZA(),o._UZ(4,"hr"),o.TgZ(5,"ul",5),o.YNc(6,g,4,4,"li",6),o.qZA(),o._UZ(7,"hr"),o.TgZ(8,"div",7),o.TgZ(9,"div",8),o.TgZ(10,"div",9),o.TgZ(11,"div",10),o.YNc(12,f,9,1,"div",11),o.qZA(),o.TgZ(13,"div",12),o._uU(14),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.ekj("visible",e.isVisible||e.isOpen),o.xp6(6),o.Q6J("ngForOf",e.menuItems),o.xp6(6),o.Q6J("ngIf",e.user),o.xp6(2),o.Oqu(e.version)}}function m(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",20),o.TgZ(1,"button",21),o.NdJ("click",function(){return o.CHM(e),o.oxw().toggle()}),o._UZ(2,"i",22),o.qZA(),o.qZA()}}let Z=(()=>{class e{constructor(e,t,n){this.userChangeService=e,this.userService=t,this.router=n,this.version=`v${d.i8}`,this.minWidth=1280,this.isOpen=!1,this.menuItems=[{name:"Applications",url:"/admin/application",icon:"fas fa-list-alt"},{name:"Application Responses",url:"/admin/application-response",icon:"fas fa-list-alt"},{name:"Users",url:"/admin/user",icon:"fas fa-users"}]}ngOnInit(){this.userChangeService.subscribe(e=>{console.log("SidenavComponent: user=%o",e),this.user=e}),this.userService.getCurrentUser().then(e=>{e||this.router.navigate(["/admin/user/login"])}),window.onresize=()=>this.onResize(),this.onResize()}onResize(){window}logout(){this.userService.logout(),this.router.navigate(["/user/login"]),console.log("logged out")}navigateToProfile(){this.router.navigate(["/user/profile"])}get isEnabled(){return!!this.user}get isVisible(){return!!this.user&&window.innerWidth>=this.minWidth}toggle(){this.isOpen=!this.isOpen}onClick(){this.isOpen=!1}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(h.v),o.Y36(p.K),o.Y36(r.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-sidenav"]],decls:2,vars:2,consts:[["class","sidenav d-flex flex-column p-2 min-vh-100",3,"visible",4,"ngIf"],["class","toggle-container",4,"ngIf"],[1,"sidenav","d-flex","flex-column","p-2","min-vh-100"],[1,"row","d-flex"],[1,"col","fs-4"],[1,"nav","nav-pills","flex-column","mb-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"footer"],[1,"row"],[1,"col"],[1,"float-start"],["ngbDropdown","","class","d-inline-block",4,"ngIf"],[1,"version","float-end","text-muted"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","click"],["ngbDropdown","",1,"d-inline-block"],["ngbDropdownToggle","",1,"btn","btn-link"],[1,"fas","fa-user-circle"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],[1,"toggle-container"],["type","button",1,"btn","btn-default",3,"click"],[1,"fas","fa-bars"]],template:function(e,t){1&e&&(o.YNc(0,v,15,5,"div",0),o.YNc(1,m,3,0,"div",1)),2&e&&(o.Q6J("ngIf",t.isEnabled),o.xp6(1),o.Q6J("ngIf",t.isEnabled&&!t.isVisible))},directives:[i.O5,i.sg,r.yS,r.Od,c.jt,c.iD,c.Vi,c.TH],styles:[".sidenav[_ngcontent-%COMP%]{display:block;position:fixed;top:0;left:-300px;min-width:300px;background-color:#fafafa;border-right:1px solid #ddd;z-index:1000;transition:left .3s}.sidenav.visible[_ngcontent-%COMP%]{left:0}.sidenav[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:.75rem 0}.sidenav[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]{font-size:.8rem;margin-top:10px;right:5px;position:absolute}.toggle-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;position:fixed;display:block;top:10px;right:10px;z-index:1000}"]}),e})();const w=["sidenav"],b=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-admin"]],viewQuery:function(e,t){if(1&e&&o.Gf(w,5),2&e){let e;o.iGM(e=o.CRH())&&(t.sidenav=e.first)}},decls:8,vars:6,consts:[["sidenav",""],[1,"admin"],[1,"content"],[1,"container-fluid"],[1,"shadow"]],template:function(e,t){if(1&e&&(o._UZ(0,"alert-container"),o._UZ(1,"app-sidenav",null,0),o.TgZ(3,"div",1),o.TgZ(4,"div",2),o.TgZ(5,"div",3),o._UZ(6,"router-outlet"),o.qZA(),o.qZA(),o._UZ(7,"div",4),o.qZA()),2&e){const e=o.MAs(2);o.xp6(4),o.ekj("sidenav-visible",null==e?null:e.isVisible)("sidenav-open",null==e?null:e.isOpen),o.xp6(3),o.ekj("sidenav-open",null==e?null:e.isOpen)}},directives:[u,Z,r.lC],styles:["div.admin[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;min-height:100vh}div.admin[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]{width:100%}div.admin[_ngcontent-%COMP%]   div.content.sidenav-visible[_ngcontent-%COMP%]{margin-left:300px}div.admin[_ngcontent-%COMP%]   div.shadow[_ngcontent-%COMP%]{height:100%;width:0;position:fixed;z-index:900;top:0;left:0;color:gray;background-color:#20202080;transition:opacity .5s;opacity:0}div.admin[_ngcontent-%COMP%]   div.shadow.sidenav-open[_ngcontent-%COMP%]{width:100%;opacity:1}"]}),e})(),children:[{path:"user",loadChildren:()=>Promise.all([n.e(434),n.e(776)]).then(n.bind(n,9776)).then(e=>e.UserModule)},{path:"application",loadChildren:()=>Promise.all([n.e(434),n.e(668)]).then(n.bind(n,2668)).then(e=>e.ApplicationModule)},{path:"application-response",loadChildren:()=>Promise.all([n.e(434),n.e(147)]).then(n.bind(n,3147)).then(e=>e.ApplicationResponseModule)}]}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[s.u5,r.Bz.forChild(b)],r.Bz]}),e})();var A=n(4762);let x=(()=>{class e{constructor(e,t){this.userService=e,this.router=t}authCheck(e,t){return(0,A.mG)(this,void 0,void 0,function*(){const e=yield this.userService.getCurrentUser();return e?"admin"===e.type:this.router.parseUrl("/users/login")})}canActivate(e,t){return this.authCheck(e,t)}canActivateChild(e,t){return this.authCheck(e,t)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(p.K),o.LFG(r.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})();var y=n(747);n(7053);let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez,r.Bz,c.IJ]]}),e})();var _=n(7770);n(5429);let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez]]}),e})(),U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[y.d,x],imports:[[i.ez,C,T,_.t,q]]}),e})()},6546:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var i=n(7716);let s=(()=>{class e{constructor(){this.alerts=[]}add(e,t,n=5e3){const i={type:e,content:t,timeout:n};this.alerts.push(i),setTimeout(()=>{this.onClose(i)},n)}info(e,t=5e3){this.add("info",e,t)}warning(e,t=5e3){this.add("warning",e,t)}error(e,t=5e3){this.add("danger",e,t)}onClose(e){const t=this.alerts.indexOf(e);-1!==t&&this.alerts.splice(t,1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7053:(e,t,n)=>{"use strict";n.d(t,{z:()=>c});var i=n(7716),s=n(8832),r=n(8583);function o(e,t){if(1&e&&i._UZ(0,"div",10),2&e){const e=i.oxw();i.Q6J("innerHtml",e.html,i.oJD)}}function a(e,t){if(1&e&&(i.TgZ(0,"div"),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.text)}}let c=(()=>{class e{constructor(e){this.modalRef=e,this.title="Are you sure?",this.text="Are you sure you want to do this?",this.html="",this.yesLabel="Yes",this.noLabel="Cancel"}no(){this.modalRef.close(!1)}yes(){this.modalRef.close(!0)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(s.Kz))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-confirm-modal"]],decls:14,vars:5,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","btn-sm","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"innerHtml",4,"ngIf"],[4,"ngIf"],[1,"modal-footer","justify-content-between"],[1,"btn","btn-default",3,"click"],[1,"btn","btn-danger",3,"click"],[3,"innerHtml"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"h4",1),i._uU(2),i.qZA(),i.TgZ(3,"button",2),i.NdJ("click",function(){return t.no()}),i.TgZ(4,"span",3),i._uU(5,"\xd7"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(6,"div",4),i.YNc(7,o,1,1,"div",5),i.YNc(8,a,2,1,"div",6),i.qZA(),i.TgZ(9,"div",7),i.TgZ(10,"button",8),i.NdJ("click",function(){return t.no()}),i._uU(11),i.qZA(),i.TgZ(12,"button",9),i.NdJ("click",function(){return t.yes()}),i._uU(13),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.Oqu(t.title),i.xp6(5),i.Q6J("ngIf",t.html),i.xp6(1),i.Q6J("ngIf",!t.html),i.xp6(3),i.Oqu(t.noLabel),i.xp6(2),i.Oqu(t.yesLabel))},directives:[r.O5],styles:[""]}),e})()},747:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var i=n(4762),s=n(7716),r=n(4987),o=n(4330);let a=(()=>{class e{constructor(e,t){this.userService=e,this.router=t}authCheck(e,t){return(0,i.mG)(this,void 0,void 0,function*(){return(yield this.userService.getCurrentUser())?(console.groupEnd(),!0):(console.groupEnd(),this.router.parseUrl("/user/login"))})}canActivate(e,t){return this.authCheck(e,t)}canActivateChild(e,t){return this.authCheck(e,t)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(r.K),s.LFG(o.F0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})()},8567:(e,t,n)=>{"use strict";n.d(t,{v:()=>s});var i=n(7716);let s=(()=>{class e{constructor(){this.event=new i.vpe}onChange(e,t=!1){(e||this.user)&&(this.user&&e&&e._id===this.user._id&&!t||(this.user=e,this.event.emit(this.user)))}getUser(){return this.user}subscribe(e){const t=this.event.subscribe(e);return e(this.user),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},4987:(e,t,n)=>{"use strict";n.d(t,{K:()=>h});var i=n(7716),s=n(6546),r=n(8832),o=n(665);let a=(()=>{class e{constructor(e,t,n){this.userService=e,this.alertService=t,this.modalRef=n,this.password1="",this.password2=""}ngOnInit(){}onChangePasswordBtn(){this.userService.saveUser({_id:this.user._id,password:this.password1}).then(e=>{this.alertService.info("Password changed successfully.")},e=>{this.alertService.error(e.message||"There was an error.  Please contact support.")}),this.modalRef.close(!0)}onCancelBtn(){this.modalRef.close(!1)}get canChangePassword(){return this.password1&&this.password2&&this.password1===this.password2&&this.password1.length>=4}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(h),i.Y36(s.c),i.Y36(r.Kz))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-user-password-modal"]],inputs:{user:"user"},decls:20,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","btn-sm","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,""],[1,"form-label"],["type","password","name","password1","autocomplete","new-password",1,"form-control",3,"ngModel","ngModelChange"],["type","password","name","password2","autocomplete","new-password",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer","justify-content-between"],[1,"btn","btn-warning",3,"disabled","click"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"h4",1),i._uU(2,"Change Password"),i.qZA(),i.TgZ(3,"button",2),i.NdJ("click",function(){return t.onCancelBtn()}),i.TgZ(4,"span",3),i._uU(5,"\xd7"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(6,"div",4),i.TgZ(7,"div",5),i.TgZ(8,"label",6),i._uU(9,"Type Password"),i.qZA(),i.TgZ(10,"input",7),i.NdJ("ngModelChange",function(e){return t.password1=e}),i.qZA(),i.qZA(),i.TgZ(11,"div",5),i.TgZ(12,"label",6),i._uU(13,"Repeat Password"),i.qZA(),i.TgZ(14,"input",8),i.NdJ("ngModelChange",function(e){return t.password2=e}),i.qZA(),i.qZA(),i.qZA(),i.TgZ(15,"div",9),i.TgZ(16,"button",10),i.NdJ("click",function(){return t.onChangePasswordBtn()}),i._uU(17,"Change Password"),i.qZA(),i.TgZ(18,"button",11),i.NdJ("click",function(){return t.onCancelBtn()}),i._uU(19,"Cancel"),i.qZA(),i.qZA()),2&e&&(i.xp6(10),i.Q6J("ngModel",t.password1),i.xp6(4),i.Q6J("ngModel",t.password2),i.xp6(2),i.Q6J("disabled",!t.canChangePassword))},directives:[o.Fj,o.JJ,o.On],styles:[""]}),e})();var c=n(8191),l=n(1681),u=n(6945),d=n(8567);let h=(()=>{class e{constructor(e,t,n,i,s){this.http=e,this.searchService=t,this.storageService=n,this.userChangeService=i,this.modalService=s,this.userTypes=[{id:"admin",name:"Admin"},{id:"regular",name:"Regular"}],this.userChangeService.subscribe(e=>{this.currentUser=e})}searchUsers(e){return this.searchService.search("/user",e)}getUserById(e){return this.http.get(`/user/${e}`)}getUserJwtByResetCode(e){return this.http.get(`/user/resetCode/${e}`)}saveUser(e){return this.http.post("/user",e).then(e=>(this.currentUser&&this.currentUser._id===e._id&&this.userChangeService.onChange(e,!0),e))}deleteUserById(e){return this.http.delete(`/user/${e}`)}resetPassword(e){return this.http.post("/user/reset",e)}login(e){return this.http.post("/auth/login",e).then(e=>this.loginWithUserJwt(e))}loginWithUserJwt(e){return this.storageService.set("jwt",e.jwt),this.userChangeService.onChange(e.user),e.user}logout(){this.storageService.remove("jwt"),this.userChangeService.onChange(null)}getCurrentUser(){return this.http.get("/auth/user").then(e=>(this.userChangeService.onChange(e),e)).catch(e=>Promise.resolve(null))}get isCurrentUserAdmin(){return this.currentUser&&"admin"===this.currentUser.type}userTypeRenderer(e){const t=this.userTypes.find(t=>t.id===e);return t?t.name:`[${e}]`}openPasswordModal(e){let t=null;return new Promise((n,i)=>{const s=this.modalService.open(a);s.componentInstance.user=e,t=s.closed.subscribe(e=>{console.log("UserService.openPasswordModal: result=%o",e),t.unsubscribe(),n(e)})})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(c.O),i.LFG(l.o),i.LFG(u.V),i.LFG(d.v),i.LFG(r.FF))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7770:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});var i=n(8583),s=n(4330),r=n(7716);let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[i.ez,s.Bz]]}),e})()}}]);