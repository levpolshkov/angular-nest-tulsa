(self.webpackChunktulsa_remote_application_client=self.webpackChunktulsa_remote_application_client||[]).push([[668],{2668:(e,i,t)=>{"use strict";t.r(i),t.d(i,{ApplicationModule:()=>E});var n=t(8583),o=t(665),a=t(7770),l=t(4330),r=t(4762),c=t(7716),s=t(8832),p=t(3252),d=t(1839);const g=["searchTable"];let u=(()=>{class e{constructor(e,i){this.applicationService=e,this.modalRef=i}ngOnInit(){this.searchTable.searchUrl="/application",this.searchTable.columns=[],this.searchTable.onRowClick=e=>this.onRowClick(e),this.searchTable.noRouting=!0,this.searchTable.defaultFilter={type:null}}onRowClick(e){this.modalRef.close(e)}onCancelBtn(){this.modalRef.close(null)}}return e.\u0275fac=function(i){return new(i||e)(c.Y36(q),c.Y36(s.Kz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-application-search-modal"]],viewQuery:function(e,i){if(1&e&&c.Gf(g,7),2&e){let e;c.iGM(e=c.CRH())&&(i.searchTable=e.first)}},decls:22,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","btn-sm","pull-right",3,"click"],[1,"fa","fa-times"],[1,"modal-body"],[1,"row","mb-3"],[1,"col-md-3"],[1,"form-label"],["type","text","name","sku",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],["searchTable",""],[3,"searchTable"],[1,"modal-footer","justify-content-between"],[1,"btn","btn-primary",3,"click"]],template:function(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"div",0),c.TgZ(1,"h4",1),c._uU(2,"Application Search"),c.qZA(),c.TgZ(3,"button",2),c.NdJ("click",function(){return i.onCancelBtn()}),c._UZ(4,"i",3),c.qZA(),c.qZA(),c.TgZ(5,"div",4),c.TgZ(6,"form"),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"label",7),c._uU(10,"Application SKU"),c.qZA(),c.TgZ(11,"input",8),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.MAs(17).params.filter.sku=i})("ngModelChange",function(){return c.CHM(e),c.MAs(17).onFilterChange()}),c.qZA(),c.qZA(),c.TgZ(12,"div",6),c.TgZ(13,"label",7),c._uU(14,"Application Name"),c.qZA(),c.TgZ(15,"input",9),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.MAs(17).params.filter.name=i})("ngModelChange",function(){return c.CHM(e),c.MAs(17).onFilterChange()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(16,"search-table",null,10),c._UZ(18,"search-footer",11),c.qZA(),c.TgZ(19,"div",12),c.TgZ(20,"button",13),c.NdJ("click",function(){return i.onCancelBtn()}),c._uU(21,"Cancel"),c.qZA(),c.qZA()}if(2&e){const e=c.MAs(17);c.xp6(11),c.Q6J("ngModel",e.params.filter.sku),c.xp6(4),c.Q6J("ngModel",e.params.filter.name),c.xp6(3),c.Q6J("searchTable",e)}},directives:[o._Y,o.JL,o.F,o.Fj,o.JJ,o.On,p.D,d.s],styles:[""]}),e})();var Z=t(8191),h=t(1681);const m=[{id:"question",name:"Question Page",class:""},{id:"hero",name:"Hero Page",class:""},{id:"single-question",name:"Single Question Page",class:""},{id:"reject",name:"Bummer Page",class:""},{id:"submit",name:"Submit Page",class:""}],f=[{id:"label",name:"Label Only",class:""},{id:"text",name:"Text Input",class:""},{id:"textarea",name:"Textarea Input",class:""},{id:"phone",name:"Phone Input",class:""},{id:"email",name:"Email Input",class:""},{id:"date",name:"Date Input",class:""},{id:"number",name:"Number Input",class:""},{id:"url",name:"URL Input",class:""},{id:"radio",name:"Radio Choices",class:""}];let q=(()=>{class e{constructor(e,i,t){this.http=e,this.searchService=i,this.modalService=t,this.pageTypes=m,this.questionTypes=f}searchApplications(e){return this.searchService.search("/application",e)}getApplicationById(e){return this.http.get(`/application/${e}`)}saveApplication(e){return this.http.post("/application",e)}deleteApplicationById(e){return this.http.delete(`/application/${e}`)}deleteApplicationSectionById(e,i){return this.http.delete(`/application/${e}/section/${i}`)}deleteApplicationPageById(e,i){return this.http.delete(`/application/${e}/page/${i}`)}pageTypeRenderer(e){const i=this.pageTypes.find(i=>i.id===e);return i?`<span class="${i.class}">${i.name}</span>`:`${e||""}`}pageTypeName(e){const i=this.pageTypes.find(i=>i.id===e);return i?i.name:`${e||""}`}pageTypeClass(e){const i=this.pageTypes.find(i=>i.id===e);return i?i.class:`${e||""}`}questionTypeRenderer(e){const i=this.questionTypes.find(i=>i.id===e);return i?`<span class="${i.class}">${i.name}</span>`:`${e||""}`}questionTypeName(e){const i=this.questionTypes.find(i=>i.id===e);return i?i.name:`${e||""}`}questionTypeClass(e){const i=this.questionTypes.find(i=>i.id===e);return i?i.class:`${e||""}`}openApplicationSearchModal(e={}){let i=null;return new Promise((t,n)=>{const o=this.modalService.open(u,{size:"lg"});o.componentInstance.defaultParams=e,i=o.closed.subscribe(e=>{i.unsubscribe(),t(e)})})}}return e.\u0275fac=function(i){return new(i||e)(c.LFG(Z.O),c.LFG(h.o),c.LFG(s.FF))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=t(6546),A=t(6891);function b(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"tr",17),c.NdJ("click",function(){const i=c.CHM(e).$implicit;return c.oxw(2).onSectionClick(i)}),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.qZA()}if(2&e){const e=i.$implicit;c.xp6(2),c.Oqu(e.title),c.xp6(2),c.Oqu(e.pages.length),c.xp6(2),c.Oqu(e.order)}}function v(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"button",18),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).onDeleteBtn()}),c._uU(1,"Delete"),c.qZA()}}function M(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"form",null,1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"h2",4),c._uU(5,"Application Detail"),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"label",7),c._uU(9,"Application Name"),c.qZA(),c.TgZ(10,"input",8),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw().application.name=i}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",9),c.NdJ("click",function(){return c.CHM(e),c.oxw().addSection()}),c._UZ(12,"i",10),c.qZA(),c.TgZ(13,"h3",11),c._uU(14,"Sections"),c.qZA(),c.TgZ(15,"table",12),c.TgZ(16,"thead"),c.TgZ(17,"tr"),c.TgZ(18,"th"),c._uU(19,"Name"),c.qZA(),c.TgZ(20,"th"),c._uU(21,"Pages"),c.qZA(),c.TgZ(22,"th"),c._uU(23,"Order"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(24,"tbody"),c.YNc(25,b,7,3,"tr",13),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"div",14),c.TgZ(27,"button",15),c.NdJ("click",function(){return c.CHM(e),c.oxw().onSaveBtn()}),c._uU(28,"Save"),c.qZA(),c.YNc(29,v,2,0,"button",16),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.MAs(1),i=c.oxw();c.xp6(10),c.Q6J("ngModel",i.application.name)("disabled",i.readonly),c.xp6(15),c.Q6J("ngForOf",i.application.sections),c.xp6(2),c.Q6J("disabled",!e.valid||e.pristine),c.xp6(2),c.Q6J("ngIf",!i.isNew)}}let x=(()=>{class e{constructor(e,i,t,n,o){this.applicationService=e,this.route=i,this.router=t,this.alertService=n,this.confirmService=o,this.readonly=!1}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){const e=this.route.snapshot.params.applicationId;console.log("ApplicationDetailPageComponent: applicationId=%o",e),this.application="new"===e?{}:yield this.applicationService.getApplicationById(e)})}get isNew(){var e;return!(null===(e=this.application)||void 0===e?void 0:e._id)}onSaveBtn(){return(0,r.mG)(this,void 0,void 0,function*(){this.application=yield this.applicationService.saveApplication(this.application),this.alertService.info("Application saved."),this.router.navigate(["/admin/application/search"])})}onDeleteBtn(){return(0,r.mG)(this,void 0,void 0,function*(){this.confirmService.confirm({text:"Are you sure you want to delete this application?"}).then(e=>(0,r.mG)(this,void 0,void 0,function*(){e&&(yield this.applicationService.deleteApplicationById(this.application._id),this.alertService.warning("Application deleted."),this.router.navigate(["/admin/application/search"]))}))})}onSectionClick(e){console.log("onSectionClick: section=%o",e),this.router.navigate(["/admin/application",this.application._id,"section",e._id])}addSection(){console.log("addSection()"),this.router.navigate(["/admin/application",this.application._id,"section","new"])}}return e.\u0275fac=function(i){return new(i||e)(c.Y36(q),c.Y36(l.gz),c.Y36(l.F0),c.Y36(T.c),c.Y36(A.z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-application-detail-page"]],decls:1,vars:1,consts:[[4,"ngIf"],["form","ngForm"],[1,"card","bg-light","mt-3","mb-3"],[1,"card-body"],[1,"card-title"],[1,"row","mb-3"],[1,"col-md-6"],[1,"form-label"],["name","applicationName","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"float-end","cursor-pointer","text-primary","mt-2",3,"click"],[1,"fas","fa-plus"],[1,"mb-0"],[1,"table","table-hover"],["class","cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"card-footer","d-flex","justify-content-between"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-danger","disabled","",3,"click",4,"ngIf"],[1,"cursor-pointer",3,"click"],["disabled","",1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&c.YNc(0,M,30,5,"form",0),2&e&&c.Q6J("ngIf",i.application)},directives:[n.O5,o._Y,o.JL,o.F,o.Fj,o.Q7,o.JJ,o.On,n.sg],styles:[""]}),e})();function y(e,i){if(1&e&&(c.TgZ(0,"option",23),c._uU(1),c.qZA()),2&e){const e=i.$implicit;c.Q6J("value",e.id),c.xp6(1),c.Oqu(e.name)}}function _(e,i){if(1&e&&(c.TgZ(0,"option",23),c._uU(1),c.qZA()),2&e){const e=i.$implicit;c.Q6J("value",e.pageId),c.xp6(1),c.Oqu(e.label)}}function C(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"div",6),c.TgZ(1,"div",24),c.TgZ(2,"label",8),c._uU(3,"Hero Image URL"),c.qZA(),c.TgZ(4,"input",25),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw(2).page.heroImage=i}),c.qZA(),c.qZA(),c.TgZ(5,"div",24),c.TgZ(6,"label",8),c._uU(7,"Hero HTML"),c.qZA(),c.TgZ(8,"textarea",26),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw(2).page.heroHtml=i}),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Q6J("ngModel",e.page.heroImage)("disabled",e.readonly),c.xp6(4),c.Q6J("ngModel",e.page.heroHtml)("disabled",e.readonly)}}function J(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"div",6),c.TgZ(1,"div",24),c.TgZ(2,"label",8),c._uU(3,"Bummer Image URL"),c.qZA(),c.TgZ(4,"input",25),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw(2).page.heroImage=i}),c.qZA(),c.qZA(),c.TgZ(5,"div",24),c.TgZ(6,"label",8),c._uU(7,"Bummer HTML"),c.qZA(),c.TgZ(8,"textarea",26),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw(2).page.heroHtml=i}),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Q6J("ngModel",e.page.heroImage)("disabled",e.readonly),c.xp6(4),c.Q6J("ngModel",e.page.heroHtml)("disabled",e.readonly)}}function w(e,i){if(1&e&&(c.TgZ(0,"option",23),c._uU(1),c.qZA()),2&e){const e=i.$implicit;c.Q6J("value",e.id),c.xp6(1),c.Oqu(e.name)}}function U(e,i){if(1&e&&(c.TgZ(0,"option",23),c._uU(1),c.qZA()),2&e){const e=i.$implicit;c.Q6J("value",e.pageId),c.xp6(1),c.Oqu(e.label)}}function N(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"input",38),c.NdJ("ngModelChange",function(i){return c.CHM(e).$implicit.label=i}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c.TgZ(4,"input",38),c.NdJ("ngModelChange",function(i){return c.CHM(e).$implicit.value=i}),c.qZA(),c.qZA(),c.TgZ(5,"td"),c.TgZ(6,"select",47),c.NdJ("ngModelChange",function(i){return c.CHM(e).$implicit.nextPageId=i}),c.YNc(7,U,2,2,"option",15),c.qZA(),c.qZA(),c.TgZ(8,"td"),c.TgZ(9,"input",42),c.NdJ("ngModelChange",function(i){return c.CHM(e).$implicit.order=i}),c.qZA(),c.qZA(),c.TgZ(10,"td"),c.TgZ(11,"div",33),c.NdJ("click",function(){const i=c.CHM(e).$implicit,t=c.oxw(2).$implicit;return c.oxw(3).removeQuestionOption(t,i)}),c._UZ(12,"i",34),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=i.$implicit,t=i.index,n=c.oxw(2).index,o=c.oxw(3);c.xp6(2),c.hYB("name","optionLabel",n,"_",t,""),c.Q6J("ngModel",e.label)("disabled",o.readonly),c.xp6(2),c.hYB("name","optionValue",n,"_",t,""),c.Q6J("ngModel",e.value)("disabled",o.readonly),c.xp6(2),c.hYB("name","nextPage_",n,"_",t,""),c.Q6J("ngModel",e.nextPageId)("required",!o.page.nextPageId),c.xp6(1),c.Q6J("ngForOf",o.nextPages),c.xp6(2),c.hYB("name","optionOrder",n,"_",t,""),c.Q6J("ngModel",e.order)("disabled",o.readonly)}}function Q(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"table",46),c.TgZ(2,"thead"),c.TgZ(3,"tr"),c.TgZ(4,"th"),c._uU(5,"Option Label"),c.qZA(),c.TgZ(6,"th"),c._uU(7,"Option Value"),c.qZA(),c.TgZ(8,"th"),c._uU(9,"Next Page"),c.qZA(),c.TgZ(10,"th"),c._uU(11,"Order"),c.qZA(),c.TgZ(12,"th"),c.TgZ(13,"div",28),c.NdJ("click",function(){c.CHM(e);const i=c.oxw().$implicit;return c.oxw(3).addQuestionOption(i)}),c._UZ(14,"i",29),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"tbody"),c.YNc(16,N,13,17,"tr",32),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(16),c.Q6J("ngForOf",e.options)}}function I(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c._UZ(1,"hr"),c.TgZ(2,"div",33),c.NdJ("click",function(){const i=c.CHM(e).$implicit;return c.oxw(3).removeQuestion(i)}),c._UZ(3,"i",34),c.qZA(),c.TgZ(4,"div",35),c.TgZ(5,"div",36),c.TgZ(6,"label",8),c._uU(7,"Question Type"),c.qZA(),c.TgZ(8,"select",37),c.NdJ("ngModelChange",function(i){return c.CHM(e).$implicit.type=i}),c.YNc(9,w,2,2,"option",15),c.qZA(),c.qZA(),c.TgZ(10,"div",36),c.TgZ(11,"label",8),c._uU(12,"Question Key"),c.qZA(),c.TgZ(13,"input",38),c.NdJ("ngModelChange",function(i){return c.CHM(e).$implicit.key=i}),c.qZA(),c.qZA(),c.TgZ(14,"div",36),c.TgZ(15,"label",8),c._uU(16,"Bullhorn Key"),c.qZA(),c.TgZ(17,"input",39),c.NdJ("ngModelChange",function(i){return c.CHM(e).$implicit.bullhornKey=i}),c.qZA(),c.qZA(),c.TgZ(18,"div",40),c.TgZ(19,"label",8),c._uU(20,"Question Label"),c.qZA(),c.TgZ(21,"input",38),c.NdJ("ngModelChange",function(i){return c.CHM(e).$implicit.label=i}),c.qZA(),c.qZA(),c.TgZ(22,"div",41),c.TgZ(23,"label",8),c._uU(24,"Question Order"),c.qZA(),c.TgZ(25,"input",42),c.NdJ("ngModelChange",function(i){return c.CHM(e).$implicit.order=i}),c.qZA(),c.qZA(),c.TgZ(26,"div",41),c.TgZ(27,"div",43),c.TgZ(28,"label",44),c._uU(29,"Optional"),c.qZA(),c._UZ(30,"br"),c.TgZ(31,"input",45),c.NdJ("ngModelChange",function(i){return c.CHM(e).$implicit.optional=i}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(32,Q,17,1,"div",0),c.qZA()}if(2&e){const e=i.$implicit,t=i.index,n=c.oxw(3);c.xp6(8),c.MGl("name","questionType",t,""),c.Q6J("ngModel",e.type),c.xp6(1),c.Q6J("ngForOf",n.questionTypes),c.xp6(4),c.MGl("name","questionKey",t,""),c.Q6J("ngModel",e.key)("disabled",n.readonly||"label"===e.type),c.xp6(4),c.MGl("name","questionBullhornKey",t,""),c.Q6J("ngModel",e.bullhornKey)("disabled",n.readonly||"label"===e.type),c.xp6(4),c.MGl("name","questionLabel",t,""),c.Q6J("ngModel",e.label)("disabled",n.readonly),c.xp6(4),c.MGl("name","questionOrder",t,""),c.Q6J("ngModel",e.order)("disabled",n.readonly),c.xp6(3),c.MGl("for","questionOptional",t,""),c.xp6(3),c.MGl("id","questionOptional",t,""),c.MGl("name","questionOptional",t,""),c.Q6J("ngModel",e.optional)("disabled",n.readonly||"label"===e.type),c.xp6(1),c.Q6J("ngIf","radio"===e.type)}}function S(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"h3",27),c._uU(2,"Questions"),c.qZA(),c.TgZ(3,"div",28),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).addQuestion()}),c._UZ(4,"i",29),c.qZA(),c.TgZ(5,"small",30),c._uU(6,"Question Key of "),c.TgZ(7,"code",31),c._uU(8,"note.application"),c.qZA(),c._uU(9," and "),c.TgZ(10,"code",31),c._uU(11,"note.partner"),c.qZA(),c._uU(12," will be added to as Applicant Notes."),c.qZA(),c.YNc(13,I,33,21,"div",32),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(13),c.Q6J("ngForOf",e.page.questions)}}function k(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"button",48),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).onDeleteBtn()}),c._uU(1,"Delete"),c.qZA()}}function O(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"form",null,1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"h2",4),c.TgZ(5,"a",5),c._uU(6),c.qZA(),c._uU(7," > "),c.TgZ(8,"a",5),c._uU(9),c.qZA(),c._uU(10),c.qZA(),c.TgZ(11,"div",6),c.TgZ(12,"div",7),c.TgZ(13,"label",8),c._uU(14,"Page ID"),c.qZA(),c.TgZ(15,"input",9),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw().page.name=i}),c.qZA(),c.qZA(),c.TgZ(16,"div",10),c.TgZ(17,"label",8),c._uU(18,"Page Title"),c.qZA(),c.TgZ(19,"input",11),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw().page.title=i}),c.qZA(),c.qZA(),c.TgZ(20,"div",10),c.TgZ(21,"label",8),c._uU(22,"Sub Title"),c.qZA(),c.TgZ(23,"input",12),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw().page.subTitle=i}),c.qZA(),c.qZA(),c.TgZ(24,"div",13),c.TgZ(25,"label",8),c._uU(26,"Type"),c.qZA(),c.TgZ(27,"select",14),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw().page.type=i}),c.YNc(28,y,2,2,"option",15),c.qZA(),c.qZA(),c.TgZ(29,"div",13),c.TgZ(30,"label",8),c._uU(31,"Next Page"),c.qZA(),c.TgZ(32,"select",16),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw().page.nextPageId=i}),c.YNc(33,_,2,2,"option",15),c.qZA(),c.qZA(),c.TgZ(34,"div",7),c.TgZ(35,"label",8),c._uU(36,"Page Order"),c.qZA(),c.TgZ(37,"input",17),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw().page.order=i}),c.qZA(),c.qZA(),c.qZA(),c.YNc(38,C,9,4,"div",18),c.YNc(39,J,9,4,"div",18),c.YNc(40,S,14,1,"div",0),c.qZA(),c.TgZ(41,"div",19),c.TgZ(42,"button",20),c.NdJ("click",function(){return c.CHM(e),c.oxw().onSaveBtn()}),c._uU(43,"Save"),c.qZA(),c.TgZ(44,"button",21),c.NdJ("click",function(){return c.CHM(e),c.oxw().onViewBtn()}),c._uU(45,"View"),c.qZA(),c.YNc(46,k,2,0,"button",22),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.MAs(1),i=c.oxw();c.xp6(5),c.MGl("routerLink","/admin/application/",i.application._id,""),c.xp6(1),c.Oqu(i.application.name),c.xp6(2),c.hYB("routerLink","/admin/application/",i.application._id,"/section/",i.section._id,""),c.xp6(1),c.Oqu(i.section.title),c.xp6(1),c.hij(" > ",i.page.title||"Unnamed Page"," "),c.xp6(5),c.Q6J("ngModel",i.page.name)("disabled",i.readonly),c.xp6(4),c.Q6J("ngModel",i.page.title)("disabled",i.readonly)("required","hero"!==i.page.type&&"reject"!==i.page.type),c.xp6(4),c.Q6J("ngModel",i.page.subTitle)("disabled",i.readonly),c.xp6(4),c.Q6J("ngModel",i.page.type),c.xp6(1),c.Q6J("ngForOf",i.pageTypes),c.xp6(4),c.Q6J("ngModel",i.page.nextPageId)("required",!i.multipleNextPages&&"reject"!==i.page.type),c.xp6(1),c.Q6J("ngForOf",i.nextPages),c.xp6(4),c.Q6J("ngModel",i.page.order)("disabled",i.readonly),c.xp6(1),c.Q6J("ngIf","hero"===i.page.type),c.xp6(1),c.Q6J("ngIf","reject"===i.page.type),c.xp6(1),c.Q6J("ngIf","question"===i.page.type||"single-question"===i.page.type),c.xp6(2),c.Q6J("disabled",!e.valid||e.pristine),c.xp6(2),c.Q6J("disabled",!e.valid),c.xp6(2),c.Q6J("ngIf",!i.isNew)}}let F=(()=>{class e{constructor(e,i,t,n,o){this.applicationService=e,this.route=i,this.router=t,this.alertService=n,this.confirmService=o,this.readonly=!1,this.pageTypes=this.applicationService.pageTypes,this.questionTypes=this.applicationService.questionTypes,this.nextPages=[]}get multipleNextPages(){var e;return null===(e=this.page)||void 0===e?void 0:e.questions.some(e=>"radio"===e.type)}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){const e=this.route.snapshot.params.applicationId,i=this.route.snapshot.params.sectionId,t=this.route.snapshot.params.pageId;console.log("ApplicationPagePageComponent: applicationId=%o, sectionId=%o, pageId=%o",e,i,t),this.application=yield this.applicationService.getApplicationById(e),this.section=this.application.sections.find(e=>e._id===i),"new"===t?(this.page={questions:[]},this.section.pages.push(this.page)):this.page=this.section.pages.find(e=>e._id===t),this.nextPages=this.application.sections.map(e=>e.pages.map(e=>({label:e.name,pageId:e._id}))).reduce((e,i)=>e.concat(i),[])})}get isNew(){var e;return!(null===(e=this.application)||void 0===e?void 0:e._id)}onSaveBtn(){return(0,r.mG)(this,void 0,void 0,function*(){this.page.questions.forEach(e=>{e.options&&e.options.sort((e,i)=>e.order-i.order)}),this.page.questions.sort((e,i)=>e.order-i.order),this.section.pages.sort((e,i)=>e.order-i.order),this.application=yield this.applicationService.saveApplication(this.application),this.alertService.info("Application Page saved."),this.router.navigate(["/admin/application",this.application._id,"section",this.section._id])})}onDeleteBtn(){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.confirmService.confirm({text:"Are you sure you want to delete this page?  This cannot be undone."}))&&(yield this.applicationService.deleteApplicationPageById(this.application._id,this.page._id),this.alertService.warning("Application Page deleted."),this.router.navigate(["/admin/application",this.application._id,"section",this.section._id]))})}addQuestion(){this.page.questions.push({order:0,key:"new",type:"label",label:"New Question"})}removeQuestion(e){return(0,r.mG)(this,void 0,void 0,function*(){if(!(yield this.confirmService.confirm({text:"Are you sure you want to delete this question?"})))return;const i=this.page.questions.indexOf(e);-1!==i&&this.page.questions.splice(i,1)})}onViewBtn(){window.open(`/applicant/application?viewPage=${this.page._id}`,"_blank","")}addQuestionOption(e){e.options.push({label:"New Option",value:"New Value"})}removeQuestionOption(e,i){return(0,r.mG)(this,void 0,void 0,function*(){if(!(yield this.confirmService.confirm({text:"Are you sure you want to delete this option?"})))return;const t=e.options.indexOf(i);-1!==t&&e.options.splice(t,1)})}}return e.\u0275fac=function(i){return new(i||e)(c.Y36(q),c.Y36(l.gz),c.Y36(l.F0),c.Y36(T.c),c.Y36(A.z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-application-page-page"]],decls:1,vars:1,consts:[[4,"ngIf"],["form","ngForm"],[1,"card","bg-light","mt-3","mb-3"],[1,"card-body"],[1,"card-title"],[3,"routerLink"],[1,"row","mb-3"],[1,"col-md-1"],[1,"form-label"],["name","pageId","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-md-3"],["name","pageTitle",1,"form-control",3,"ngModel","disabled","required","ngModelChange"],["name","pageSubTitle",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-md-2"],["name","pageType","required","",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","nextPageId",1,"form-select",3,"ngModel","required","ngModelChange"],["type","number","name","order","min","0","max","999","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","row mb-3",4,"ngIf"],[1,"card-footer","d-flex","justify-content-between"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],["class","btn btn-danger",3,"click",4,"ngIf"],[3,"value"],[1,"col-md-12"],["name","heroImage","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["name","heroHtml","rows","5","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"mb-1"],[1,"float-end","cursor-pointer","text-primary","mt-2",3,"click"],[1,"fas","fa-plus"],[1,"form-text"],[1,"text-muted"],[4,"ngFor","ngForOf"],[1,"float-end","cursor-pointer","text-danger","mt-2",3,"click"],[1,"fas","fa-minus"],[1,"row"],[1,"col-2"],["required","",1,"form-select",3,"name","ngModel","ngModelChange"],["required","",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],[1,"form-control",3,"name","ngModel","disabled","ngModelChange"],[1,"col-4"],[1,"col-1"],["type","number","min","0","max","999","required","",1,"form-control",3,"name","ngModel","disabled","ngModelChange"],[1,"form-check"],[1,"form-check-label",3,"for"],["type","checkbox",1,"ms-0","form-check-input",3,"id","name","ngModel","disabled","ngModelChange"],[1,"table","table-sm"],[1,"form-select",3,"name","ngModel","required","ngModelChange"],[1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&c.YNc(0,O,47,26,"form",0),2&e&&c.Q6J("ngIf",i.application&&i.page)},directives:[n.O5,o._Y,o.JL,o.F,l.yS,o.Fj,o.Q7,o.JJ,o.On,o.EJ,n.sg,o.qQ,o.Fd,o.wV,o.YN,o.Kr,o.Wl],styles:["h2[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none}"]}),e})();function H(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"tr",20),c.NdJ("click",function(){const i=c.CHM(e).$implicit;return c.oxw(2).onPageClick(i)}),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._UZ(6,"span",21),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.qZA()}if(2&e){const e=i.$implicit,t=c.oxw(2);c.xp6(2),c.Oqu(e.name),c.xp6(2),c.Oqu(e.title),c.xp6(2),c.Q6J("innerHtml",t.applicationService.pageTypeRenderer(e.type),c.oJD),c.xp6(2),c.Oqu(e.questions.length),c.xp6(2),c.Oqu(e.order)}}function Y(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"button",22),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).onDeleteBtn()}),c._uU(1,"Delete"),c.qZA()}}function P(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"form",null,1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"h2",4),c.TgZ(5,"a",5),c._uU(6),c.qZA(),c._uU(7),c.qZA(),c.TgZ(8,"div",6),c.TgZ(9,"div",7),c.TgZ(10,"label",8),c._uU(11,"Section Name"),c.qZA(),c.TgZ(12,"input",9),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw().section.title=i}),c.qZA(),c.qZA(),c.TgZ(13,"div",10),c.TgZ(14,"label",8),c._uU(15,"Section Order"),c.qZA(),c.TgZ(16,"input",11),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.oxw().section.order=i}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"div",12),c.NdJ("click",function(){return c.CHM(e),c.oxw().addPage()}),c._UZ(18,"i",13),c.qZA(),c.TgZ(19,"h3",14),c._uU(20,"Pages"),c.qZA(),c.TgZ(21,"table",15),c.TgZ(22,"thead"),c.TgZ(23,"tr"),c.TgZ(24,"th"),c._uU(25,"ID"),c.qZA(),c.TgZ(26,"th"),c._uU(27,"Name"),c.qZA(),c.TgZ(28,"th"),c._uU(29,"Type"),c.qZA(),c.TgZ(30,"th"),c._uU(31,"Questions"),c.qZA(),c.TgZ(32,"th"),c._uU(33,"Order"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(34,"tbody"),c.YNc(35,H,11,5,"tr",16),c.qZA(),c.qZA(),c.qZA(),c.TgZ(36,"div",17),c.TgZ(37,"button",18),c.NdJ("click",function(){return c.CHM(e),c.oxw().onSaveBtn()}),c._uU(38,"Save"),c.qZA(),c.YNc(39,Y,2,0,"button",19),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.MAs(1),i=c.oxw();c.xp6(5),c.MGl("routerLink","/admin/application/",i.application._id,""),c.xp6(1),c.Oqu(i.application.name),c.xp6(1),c.hij(" > ",i.section.title," "),c.xp6(5),c.Q6J("ngModel",i.section.title)("disabled",i.readonly),c.xp6(4),c.Q6J("ngModel",i.section.order)("disabled",i.readonly),c.xp6(19),c.Q6J("ngForOf",i.section.pages),c.xp6(2),c.Q6J("disabled",!e.valid||e.pristine),c.xp6(2),c.Q6J("ngIf",!i.isNew)}}let $=(()=>{class e{constructor(e,i,t,n,o){this.applicationService=e,this.route=i,this.router=t,this.alertService=n,this.confirmService=o,this.readonly=!1}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){const e=this.route.snapshot.params.applicationId,i=this.route.snapshot.params.sectionId;console.log("ApplicationSectionPageComponent: applicationId=%o, sectionId=%o",e,i),this.application=yield this.applicationService.getApplicationById(e),"new"===i?(this.section={pages:[]},this.application.sections.push(this.section)):this.section=this.application.sections.find(e=>e._id===i)})}get isNew(){var e;return!(null===(e=this.application)||void 0===e?void 0:e._id)}onSaveBtn(){return(0,r.mG)(this,void 0,void 0,function*(){this.application.sections.sort((e,i)=>e.order-i.order),this.application=yield this.applicationService.saveApplication(this.application),this.alertService.info("Application Section saved."),this.router.navigate(["/admin/application",this.application._id])})}onDeleteBtn(){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.confirmService.confirm({text:"Are you sure you want to delete this section?  This cannot be undone."}))&&(yield this.applicationService.deleteApplicationSectionById(this.application._id,this.section._id),this.alertService.warning("Application Section deleted."),this.router.navigate(["/admin/application",this.application._id]))})}onPageClick(e){console.log("onSectionClick: page=%o",e),this.router.navigate(["/admin/application",this.application._id,"section",this.section._id,"page",e._id])}addPage(){console.log("addPage()"),this.router.navigate(["/admin/application",this.application._id,"section",this.section._id,"page","new"])}}return e.\u0275fac=function(i){return new(i||e)(c.Y36(q),c.Y36(l.gz),c.Y36(l.F0),c.Y36(T.c),c.Y36(A.z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-application-section-page"]],decls:1,vars:1,consts:[[4,"ngIf"],["form","ngForm"],[1,"card","bg-light","mt-3","mb-3"],[1,"card-body"],[1,"card-title"],[3,"routerLink"],[1,"row","mb-3"],[1,"col-md-9"],[1,"form-label"],["name","sectionTitle","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-md-3"],["type","number","name","sectionOrder","min","0","max","999","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"float-end","cursor-pointer","text-primary","mt-2",3,"click"],[1,"fas","fa-plus"],[1,"mb-0"],[1,"table","table-hover"],["class","cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"card-footer","d-flex","justify-content-between"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"cursor-pointer",3,"click"],[3,"innerHtml"],[1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&c.YNc(0,P,40,10,"form",0),2&e&&c.Q6J("ngIf",i.application&&i.section)},directives:[n.O5,o._Y,o.JL,o.F,l.yS,o.Fj,o.Q7,o.JJ,o.On,o.qQ,o.Fd,o.wV,n.sg],styles:["h2[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none}"]}),e})();const B=["searchTable"],G=[{path:"",redirectTo:"search"},{path:"search",component:(()=>{class e{constructor(e,i){this.router=e,this.applicationService=i}ngOnInit(){this.searchTable.searchUrl="/application",this.searchTable.columns=[{field:"name",header:"Application Name"}],this.searchTable.onRowClick=e=>this.onRowClick(e),this.searchTable.defaultFilter={type:null}}onRowClick(e){this.router.navigate(["/admin/application",e._id])}}return e.\u0275fac=function(i){return new(i||e)(c.Y36(l.F0),c.Y36(q))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-application-search-page"]],viewQuery:function(e,i){if(1&e&&c.Gf(B,7),2&e){let e;c.iGM(e=c.CRH())&&(i.searchTable=e.first)}},decls:13,vars:2,consts:[[1,"card","bg-light","mt-3","mb-3"],[1,"card-body"],[1,"card-title","mb-3"],[1,"row"],[1,"col-md-3"],[1,"form-label"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],["searchTable",""],[3,"searchTable"]],template:function(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"form"),c.TgZ(1,"div",0),c.TgZ(2,"div",1),c.TgZ(3,"h2",2),c._uU(4,"Application Search"),c.qZA(),c.TgZ(5,"div",3),c.TgZ(6,"div",4),c.TgZ(7,"label",5),c._uU(8,"Application Name"),c.qZA(),c.TgZ(9,"input",6),c.NdJ("ngModelChange",function(i){return c.CHM(e),c.MAs(11).params.filter.name=i})("ngModelChange",function(){return c.CHM(e),c.MAs(11).onFilterChange()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(10,"search-table",null,7),c._UZ(12,"search-footer",8)}if(2&e){const e=c.MAs(11);c.xp6(9),c.Q6J("ngModel",e.params.filter.name),c.xp6(3),c.Q6J("searchTable",e)}},directives:[o._Y,o.JL,o.F,o.Fj,o.JJ,o.On,p.D,d.s],styles:[""]}),e})()},{path:":applicationId",component:x},{path:":applicationId/section/:sectionId",component:$},{path:":applicationId/section/:sectionId/page/:pageId",component:F}];let L=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[l.Bz.forChild(G)],l.Bz]}),e})(),E=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,a.t,o.u5,L]]}),e})()}}]);